/**
 * Static Single Page Application (staticSPA.slim)
 * - A simple native JavaScript (ES5) utility library to include partial HTML(s).
 * - You don't need a framework or jQuery!!!
 *
 * version: 1.0.0
 *
 * License: MIT
 *
 * USAGE:
 * <!doctype html>
 * <html lang="en">
 * <head>
 *   <title>Single HTML Page</title>
 * </head>
 * <body>
 *   ...
 *   <div src="partial-html-files/header.html"></div>
 *   ...
 *   <br src="partial-html-files/footer.html" replace >
 *   ...
 *   <a href="#partial-html-files/profile.html" target="#targetContainer">Profile</a>
 *   ...
 *   <button href="#partial-html-files/profile.html" target="#targetContainer">Profile</button>
 *   ...
 *   ...
 *   <script src="path-to-this-script-file"></script>
 * </body>
 * </html>
*/
(function(t){function e(t,e){return e="string"==typeof e&&p.querySelector(e)||e||p,Array.prototype.slice.call(e.querySelectorAll(t))}function r(t,e,r){t.setAttribute(r,t.getAttribute(e)),t.removeAttribute(e)}function i(t){var e=p.createElement("script");e.text=t.innerHTML;for(var r=t.attributes.length-1;r>=0;r--)e.setAttribute(t.attributes[r].name,t.attributes[r].value);return e}function a(t,a){e("x-script:not([processed])",t).forEach(function(t){t.setAttribute("processed",""),a&&t.setAttribute("await","");var e=i(t);if(e.hasAttribute("src")){var n=!e.hasAttribute("await");!a&&n?t.parentNode.replaceChild(e,t):(r(t,"src","x-src"),o(e))}else t.parentNode.replaceChild(e,t)})}function n(t,e){if("SCRIPT"==t.tagName){if(e.trim()){var r=document.createElement("script");r.id=(new Date).getMilliseconds(),r.text=e,document.head.appendChild(r).parentNode.removeChild(r)}}else if(e=(e||"").replace(/<(\/)*script/gi,"<$1x-script"),t.tagName.indexOf("REPLACE")>=0||t.hasAttribute("replace")){var i=t.parentNode,n=t.hasAttribute("await");t.outerHTML=e,a(i,n),u(i)}else t.innerHTML=e,a(t,t.hasAttribute("await")),u(t)}function s(){if(4==this.readyState){var t=this.status;n(this.targetEl,t>=200&&t<300||304==t?this.responseText:"Failed ("+t+":"+this.statusText+") to load ["+this.responseURL+"]")}}function o(e,r){if(r=r||(e.getAttribute("src")||"").trim(),e.setAttribute("x-src",r),e.removeAttribute("src"),r){var i=new XMLHttpRequest,a=!e.hasAttribute("await");">"==r[0]&&(r=(t._defaultRootPath||l)+r.substring(1)),i.targetEl=e,i.onreadystatechange=s,i.open("GET",r,a),i.send()}}function c(){var t=this,e=p.querySelector(t.getAttribute("x-target"));e?e.tagName.indexOf("REPLACE")<0?(e.removeAttribute("replace"),t.hasAttribute("await")?e.setAttribute("await",""):e.removeAttribute("await"),o(e,t.getAttribute("x-href").substring(1))):console.warn("Target element cannot be replaced. Invalid target specified in element",t):console.warn("Invalid target specified in element",t)}function u(t){t=t||document,e("[src]"+"audio embed iframe img input script source track video x-script [processed]".split(" ").map(function(t){return":not("+t+")"}).join(""),t).forEach(function(t){t.setAttribute("processed",""),o(t)}),e('[href^="#"][target^="#"]',t).forEach(function(t){r(t,"target","x-target"),r(t,"href","x-href"),t.setAttribute("href","javascript:;"),t.addEventListener("click",c)})}function d(){u()}var l="app/components/",p=document;//window._defaultRootPath
"complete"==p.readyState||"loading"!=p.readyState&&!p.documentElement.doScroll?d():p.addEventListener("DOMContentLoaded",d)})(this);